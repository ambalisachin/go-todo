 name: Deploy App and Deploy

 on:
  push:
    branches: [main]

jobs:

  build:
<<<<<<< HEAD
      name: Build
=======
      name: Post Build
>>>>>>> 2478abd (Deploy yml changed)
      runs-on: ubuntu-latest
      steps:
      - name: executing remote ssh commands using password
        uses: appleboy/ssh-action@v0.1.10
          with:
            host: ${{secrets.SSH_HOST}} # IP address of the server you wish to ssh into
            key: ${{secrets.SSH_KEY}} # Private or public key of the server
            username: ${{ secrets.SSH_USERNAME }} # User of the server you want to ssh into

            script: |
            
              export GO_DIR=/usr/local/go
              source /usr/local/go/bin/go

              cd /root
              cd go
              cd deploying

              echo "Cloning Git Repo to /root/deploying"
              git clone https://ambalisachin:${{secrets.GITHUB_TOKEN}}@github.com/ambalisachin/go-todo.git

              echo "Building Golang source"
              cd go-tod
              go build

